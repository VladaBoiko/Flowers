{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,S,8BDMA,MAAME,EAAO,CACXC,aAAcC,SAASC,cAAc,gCACrCC,SAAUF,SAASC,cAAc,4BACjCE,eAAgBH,SAASC,cAAc,kCACvCG,UAAWJ,SAASC,cAAc,6BAClCI,eAAgBL,SAASC,cAAc,yCAGnCK,EAAW,CACfP,aAAc,wBACdG,SAAU,iBACVC,eAAgB,uBAChBC,UAAW,oBACXC,eAAgB,sBAGZE,GAAqB,EAAAV,EAAAW,sBAAqB,kBAyBhD,SAASC,EAAeC,EAAMC,EAASC,GACrC,IAAIC,EAAe,GAMnB,OALIF,IAAYL,EAASD,eACvBQ,EAAe,IAAIH,GAAMI,QAAOC,GAAQA,EAAKC,UAAYL,IAASM,MAAK,CAACC,EAAGC,IAAMA,EAAEC,OAASF,EAAEE,SACrFR,IACTC,EAAe,IAAIH,GAAMI,QAAOC,GAAQH,EAAUS,QAAQN,EAAKO,KAAM,IAAIL,MAAK,CAACC,EAAGC,IAAMA,EAAEC,OAASF,EAAEE,UAEnGP,GAAgBF,IAAYL,EAASD,gBAAkBQ,EAAaU,OAAS,EACxEV,EAAaW,MAAM,EAAG,GAE3BX,GAAgBA,EAAaU,OAAS,EACjCV,EAAaW,MAAM,EAAG,GAExBX,C,EAlCTY,iBACE,IACE,MAAMf,QAAaf,EAAA+B,WAAWC,UAE9B,IAAKX,WAAWV,EAAU,CACxB,IAAIO,EAAe,KAEjBA,EADEP,EAASU,WAAaV,EAASD,eAClBI,EAAeC,EAAMJ,EAASU,UAE9BP,EAAeC,EAAMJ,EAASU,SAAUT,GAEzD,MAAMqB,GAAS,EAAAC,EAAAC,cAAajB,GAC5Bf,EAAKkB,SAASe,mBAAmB,YAAaH,E,EAEhD,EAAAI,EAAAC,kBCnCejC,SAASkC,iBAAiB,YAElCC,SAAQC,GACfA,EAAQC,iBAAiB,SAASC,IAGhC,MAAMC,EAAYH,EAAQd,GAC1B,GAAIiB,EAAW,CACb,MAAMC,GAAe,EAAA3C,EAAAW,sBAXjB,kBAaJ,GAAqB,cAAjBgC,EAA8B,CAChC,MAAMC,EAAa,CAACF,IACpB,EAAA1C,EAAA6C,oBAfE,iBAesBD,E,MACqB,IAApCD,EAAanB,QAAQkB,KAC9BC,EAAaG,KAAKJ,IAClB,EAAA1C,EAAA6C,oBAlBE,iBAkBsBF,G,ODsB9B,MAAOI,GACPC,QAAQC,IAAIF,E,EAnBhBG","sources":["src/js/index-page-offers.js","src/js/catalog/handleWatchedHistory.js"],"sourcesContent":["import { APIGetData } from './catalog/fetch-cards';\nimport { handleFavorite } from './catalog/favoriteHandle';\nimport { handleWatchedHistory } from './catalog/handleWatchedHistory';\nimport { loadFromLocalStorage } from './catalog/localStorage';\nimport { createMarkup } from './catalog/markup';\n\nconst refs = {\n  offerSpecial: document.querySelector('.offer--special .offer__list'),\n  dayOffer: document.querySelector('.offer--day .offer__list'),\n  recommendOffer: document.querySelector('.offer--recommend .offer__list'),\n  offerPlus: document.querySelector('.offer--plus .offer__list'),\n  earlierWatched: document.querySelector('.offer--earlier-watched .offer__list'),\n};\n\nconst sections = {\n  offerSpecial: 'Спеціальна пропозиція',\n  dayOffer: 'Пропозиція дня',\n  recommendOffer: 'Рекомендуємо троянди',\n  offerPlus: 'З квітами купують',\n  earlierWatched: 'Раніше переглянуто',\n};\n\nconst earlierWatchedList = loadFromLocalStorage('EarlierWatched');\n\nrenderData();\n\nasync function renderData() {\n  try {\n    const data = await APIGetData.getData();\n\n    for (section in sections) {\n      let filteredData = null;\n      if (sections[section] !== sections.earlierWatched) {\n        filteredData = filterProducts(data, sections[section]);\n      } else {\n        filteredData = filterProducts(data, sections[section], earlierWatchedList);\n      }\n      const markup = createMarkup(filteredData);\n      refs[section].insertAdjacentHTML('beforeend', markup);\n    }\n    handleFavorite();\n    handleWatchedHistory();\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction filterProducts(data, section, otherData) {\n  let filteredData = [];\n  if (section !== sections.earlierWatched) {\n    filteredData = [...data].filter(card => card.section === section).sort((a, b) => b.rating - a.rating);\n  } else if (otherData) {\n    filteredData = [...data].filter(card => otherData.indexOf(card.id) > -1).sort((a, b) => b.rating - a.rating);\n  }\n  if (filteredData && section === sections.earlierWatched && filteredData.length > 4) {\n    return filteredData.slice(0, 4);\n  }\n  if (filteredData && filteredData.length > 8) {\n    return filteredData.slice(0, 8);\n  }\n  return filteredData;\n}\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'EarlierWatched';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', event => {\n      // event.preventDefault();\n\n      const productID = product.id;\n      if (productID) {\n        const savedListFav = loadFromLocalStorage(key);\n\n        if (savedListFav === 'undefined') {\n          const newListFav = [productID];\n          saveToLocalStorage(key, newListFav);\n        } else if (savedListFav.indexOf(productID) === -1) {\n          savedListFav.push(productID);\n          saveToLocalStorage(key, savedListFav);\n        }\n      }\n    })\n  );\n}\n"],"names":["$luHVj","parcelRequire","$5rfeO","$7a197bac8f3cf206$var$refs","offerSpecial","document","querySelector","dayOffer","recommendOffer","offerPlus","earlierWatched","$7a197bac8f3cf206$var$sections","$7a197bac8f3cf206$var$earlierWatchedList","loadFromLocalStorage","$7a197bac8f3cf206$var$filterProducts","data","section1","otherData","filteredData","filter","card","section","sort","a","b","rating","indexOf","id","length","slice","async","APIGetData","getData","markup","$gBFI5","createMarkup","insertAdjacentHTML","$8qLFi","handleFavorite","querySelectorAll","forEach","product","addEventListener","event","productID","savedListFav","newListFav","saveToLocalStorage","push","error","console","log","$7a197bac8f3cf206$var$renderData"],"version":3,"file":"index.6658208d.js.map"}