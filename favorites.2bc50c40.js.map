{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/catalog/fetch-cards.js","src/js/catalog/markup.js","src/js/catalog/localStorage.js","src/js/catalog/getKey.js","node_modules/@parcel/runtime-js/lib/runtime-c28f683df6226e94.js","src/js/catalog/favoriteHandle.js","src/js/catalog/filter.js","node_modules/@parcel/runtime-js/lib/runtime-3b4940b1369d3e57.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","const axios = require('axios').default;\n\nconst instance = axios.create({\n  baseURL: 'https://62f9492f3eab3503d1e324fd.mockapi.io/',\n});\n\nexport const APIGetData = {\n  async getData(params = '') {\n    const response = await instance.get(`/products/?${params}`);\n    const data = await response.data;\n    return data;\n  },\n\n  async getDataByID(id) {\n    const response = await instance.get(`/products/`, { params: { id: id } });\n\n    const data = await response.data;\n    return data;\n  },\n};\n","import { loadFromLocalStorage } from './localStorage';\nimport getKey from './getKey';\nimport icons from '../../img/catalog/icon-fav.svg';\n\nconst statuses = {\n  hit: 'Xіт продажу',\n  absent: 'Немає в наявності',\n  new: 'Новинка',\n};\nconst favoriteList = loadFromLocalStorage('Favorites');\n// console.log(favoriteList);\n\nexport const createMarkup = data => {\n  return data\n    .map(({ id, name, image, price, status }) => {\n      const keyStatus = getKey(status, statuses);\n      return `<li class=\"offer-list__item product\" id=\"${id}\">\n        <a href=\"./good-card.html\" class=\"product__link\">\n          <img\n            loading=\"lazy\"\n            src=\"${image}\"\n            alt=\"${name}\"\n            class=\"product__image\"\n            width=\"290\"\n            height=\"250\"\n          />\n          <div class=\"product__overlay\">\n            <p class=\"product__status ${keyStatus}\">${status}</p>\n            <button type=\"button\" class=\"product__favorite ${isFav(id)}\">\n              <svg width=\"34\" height=\"34\">\n                <use href=\"${icons}#icon-fav\"></use>\n              </svg>\n            </button>\n          </div>\n          <div class=\"product__content\">\n            <p class=\"product__text\">\n              ${name}\n            </p>\n            <p class=\"product__price\">${price} у.о.</p>\n            <button type=\"button\" class=\"product__button button dark\">\n              Замовити\n            </button>\n            <button type=\"button\" class=\"product__button-one-click\">\n              Придбати в 1 клік\n            </button>\n          </div>\n        </a>\n      </li>\n    `;\n    })\n    .join('');\n};\n\nexport const clearData = list => {\n  list.innerHTML = '';\n};\n\nfunction isFav(id) {\n  return favoriteList.indexOf(id) === -1 ? '' : 'checked';\n}\n","export function saveToLocalStorage(key, value) {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.log('save error-', error.message);\n  }\n}\n\nexport function loadFromLocalStorage(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? 'undefined' : JSON.parse(serializedState);\n  } catch (error) {\n    console.log('load error-', error.message);\n  }\n}\n","export default function getKey(value, object) {\n  let key = '';\n  Object.entries(object).map(el => (el[1] === value ? (key = el[0]) : ''));\n  return key;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"giLgO\")).toString();","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'Favorites';\n\nexport function handleFavorite() {\n  const favoriteBtns = document.querySelectorAll('.product__favorite');\n\n  favoriteBtns.forEach(favoriteBtn =>\n    favoriteBtn.addEventListener('click', event => {\n      event.preventDefault();\n      const productID = favoriteBtn.closest('.product').id;\n\n      if (productID) {\n        const savedListFav = loadFromLocalStorage(key);\n\n        if (savedListFav === 'undefined') {\n          const newListFav = [productID];\n          saveToLocalStorage(key, newListFav);\n        } else if (savedListFav.indexOf(productID) === -1) {\n          savedListFav.push(productID);\n          saveToLocalStorage(key, savedListFav);\n        } else {\n          savedListFav.splice(savedListFav.indexOf(productID), 1);\n          saveToLocalStorage(key, savedListFav);\n        }\n      }\n\n      favoriteBtn.classList.toggle('checked');\n    })\n  );\n}\n","export const sections = {\n  offerSpecial: 'Спеціальна пропозиція',\n  dayOffer: 'Пропозиція дня',\n  recommendOffer: 'Рекомендуємо троянди',\n  offerPlus: 'З квітами купують',\n  earlierWatched: 'Раніше переглянуто',\n};\n\nexport const filterWords = {\n  category: 'Категорія',\n  sort: 'Вид',\n  color: 'Колір',\n  amount: 'Кількість',\n  size: 'Розмір',\n  form: 'Форма букету',\n  price: 'Ціна',\n};\n\nexport const filterData = (data, filterParams) => {\n  const filterKeys = Object.keys(filterWords);\n\n  if (Object.keys(filterParams).length) {\n    const filterByCategory = filterByOption(data, filterParams[filterKeys[0]], filterKeys[0]);\n\n    const filterByType = filterByOption(filterByCategory, filterParams[filterKeys[1]], filterKeys[1]);\n\n    const filterByColor = filterByOption(filterByType, filterParams[filterKeys[2]], filterKeys[2]);\n\n    const filterByAmount = filterByOption(filterByColor, filterParams[filterKeys[3]], filterKeys[3]);\n\n    const filterBySize = filterByOption(filterByAmount, filterParams[filterKeys[4]], filterKeys[4]);\n\n    const filterByForm = filterByOption(filterBySize, filterParams[filterKeys[5]], filterKeys[5]);\n\n    const filteredData = filterByPrice(filterByForm, filterParams[filterKeys[6]]);\n\n    return filteredData;\n  }\n  return data;\n};\n\nexport const filterByOption = (data, filterParam, filterKey) => {\n  return data.filter(card => {\n    if (filterParam.length === 0) {\n      return true;\n    }\n    return filterParam.includes(card[filterKey]);\n  });\n};\n\nexport const filterByPrice = (data, filterParam) =>\n  data.filter(card => {\n    if (filterParam.length === 0) {\n      return true;\n    }\n\n    let cardPriceRange = '';\n    if (card.price < 30) {\n      cardPriceRange = 'до 30';\n    } else if (card.price >= 30 && card.price < 45) {\n      cardPriceRange = '30 - 45';\n    } else if (card.price >= 45 && card.price < 65) {\n      cardPriceRange = '45 - 65';\n    } else if (card.price >= 65 && card.price < 80) {\n      cardPriceRange = '65 - 80';\n    } else if (card.price >= 80) {\n      cardPriceRange = 'від 80';\n    }\n\n    return filterParam.includes(cardPriceRange) > 0;\n  });\n\nexport const filterById = (data, idList) =>\n  [...data].filter(card => idList.indexOf(card.id) > -1).sort((a, b) => b.rating - a.rating);\n\nexport const filterBySection = (data, section, otherData) => {\n  let filteredData = [];\n\n  if (section !== sections.earlierWatched) {\n    filteredData = [...data].filter(card => card.section === section).sort((a, b) => b.rating - a.rating);\n  } else if (otherData) {\n    filteredData = filterById(data, otherData);\n  }\n\n  if (filteredData && section === sections.earlierWatched && filteredData.length > 4) {\n    return filteredData.slice(0, 4);\n  }\n\n  if (filteredData && filteredData.length > 8) {\n    return filteredData.slice(0, 8);\n  }\n  return filteredData;\n};\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"aj1MU\\\":\\\"favorites.2bc50c40.js\\\",\\\"giLgO\\\":\\\"icon-fav.d2a3f45b.svg\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$fa5e7892b7db871e$var$instance","parcelRequire","default","create","baseURL","$fa5e7892b7db871e$export$bf05bfad153d9b1b","async","params","response","get","data","$5rfeO","$c17074c9bea9e388$var$statuses","hit","absent","new","$c17074c9bea9e388$var$favoriteList","loadFromLocalStorage","$c17074c9bea9e388$export$24783e9f3a24abe4","map","name","image","price","status","$2DEdq","indexOf","$c17074c9bea9e388$var$isFav","$parcel$interopDefault","$92k8A","join","$c17074c9bea9e388$export$ec21c014cef0b1e8","list","innerHTML","$3f5b4b525e2ea599$export$1b8cd2d0ef9a8e5d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","log","message","$3f5b4b525e2ea599$export$e68c847c0bceb7d5","getItem","parse","$1ebe6b3b77f9b103$export$2e2bcd8739ae039","object","entries","el","module","exports","URL","resolve","import","meta","url","toString","$6235b9bbf6649663$var$key","$6235b9bbf6649663$export$52be419ad328e20a","document","querySelectorAll","forEach","favoriteBtn","addEventListener","event","preventDefault","productID","closest","savedListFav","newListFav","saveToLocalStorage","push","splice","classList","toggle","$db8e5253511298e7$export$5a1dbaa3e4449344","offerSpecial","dayOffer","recommendOffer","offerPlus","earlierWatched","$db8e5253511298e7$export$594f50dfae6c7004","category","sort","color","amount","size","form","$db8e5253511298e7$export$d6ad891437e8c72c","filterParams","filterKeys","filterByCategory","$db8e5253511298e7$export$ea2e2dbc5d814982","filterByType","filterByColor","filterByAmount","filterBySize","filterByForm","$db8e5253511298e7$export$37d568e1c36a0ac2","filterParam","filterKey","filter","card","includes","cardPriceRange","$db8e5253511298e7$export$ff9a17ccab304c79","idList","a","b","rating","$db8e5253511298e7$export$aac545ade3781a23","section","otherData","filteredData","slice","register"],"version":3,"file":"favorites.2bc50c40.js.map"}