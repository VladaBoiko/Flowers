{"mappings":"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","sources":["src/js/catalog-page.js","src/js/catalog/render.js","src/js/catalog/smoothScroll.js"],"sourcesContent":["import { APIGetData } from './catalog/fetch-cards';\nimport { createMarkup, clearData } from './catalog/markup';\nimport { render } from './catalog/render';\nimport { filterData, filterWords } from './catalog/filter';\nimport { smoothScroll } from './catalog/smoothScroll';\n\nimport { reviewsSwiper } from './reviews-slider';\n\nreviewsSwiper.enabled = true;\n\n// import data from '../products.json';\n\nimport getKey from './catalog/getKey';\n\nconst refs = {\n  resetFormBtn: document.querySelector('.filter-catalog__clear-all-btn'),\n  form: document.querySelector('.filter-catalog'),\n  catalogList: document.querySelector('.catalog-list'),\n};\n\nconst catalogData = {\n  selector: refs.catalogList,\n  filterParams: {},\n  page: 1,\n  totalPages: 1,\n  offset: 9,\n  incrementPage() {\n    this.page += 1;\n  },\n  resetPage() {\n    this.page = 1;\n    this.filterParams = {};\n  },\n  async renderData() {\n    try {\n      const data = await APIGetData.getData();\n\n      const filteredData = filterData(data, this.filterParams);\n      filteredData.length <= this.offset && loadMoreBtn.hide();\n      this.totalPages = filteredData.length / this.offset;\n      const slicedData = sliceData(filteredData, this.page, this.offset);\n\n      const markup = createMarkup(slicedData);\n\n      render(refs.catalogList, markup);\n    } catch (error) {\n      console.log(error);\n    }\n  },\n};\n\nfunction getCheckedCheckBox() {\n  const filterData = {\n    category: [],\n    sort: [],\n    color: [],\n    amount: [],\n    size: [],\n    form: [],\n    price: [],\n  };\n  [...refs.form].map(el => {\n    if (el.nodeName === 'INPUT' && el.checked) {\n      const param = el.parentElement.parentElement.previousElementSibling.textContent;\n      const value = el.nextElementSibling.textContent;\n\n      const key = getKey(param, filterWords);\n      const valueFormat = key === 'amount' || key === 'size' ? Number.parseInt(value) : value;\n      filterData[key].indexOf(value) === -1 && filterData[key].push(valueFormat);\n    }\n  });\n  return filterData;\n}\n\nrefs.form.reset();\ncatalogData.renderData();\n\nrefs.resetFormBtn.addEventListener('click', () => {\n  catalogData.resetPage();\n  clearData(refs.catalogList);\n  refs.form.reset();\n  loadMoreBtn.show();\n  loadMoreBtn.enable();\n  catalogData.renderData();\n});\n\nrefs.form.addEventListener('change', () => {\n  clearData(refs.catalogList);\n  catalogData.resetPage();\n  catalogData.filterParams = getCheckedCheckBox();\n  catalogData.renderData();\n  loadMoreBtn.show();\n  loadMoreBtn.enable();\n});\n\nconst loadMoreBtn = {\n  element: document.querySelector('.catalog__btn'),\n  className: 'hidden',\n  disable() {\n    this.element.disabled = true;\n  },\n  enable() {\n    this.element.disabled = false;\n  },\n  hide() {\n    this.element.classList.add(this.className);\n  },\n  show() {\n    this.element.classList.remove(this.className);\n  },\n};\n\nloadMoreBtn.element.addEventListener('click', () => {\n  loadMoreBtn.disable();\n  catalogData.incrementPage();\n  catalogData.renderData();\n  if (catalogData.page >= catalogData.totalPages) {\n    loadMoreBtn.hide();\n  } else {\n    loadMoreBtn.enable();\n  }\n  smoothScroll(refs.catalogList);\n});\n\nfunction sliceData(data, page, offset) {\n  const totalPages = data.length / offset;\n  const start = page * offset - offset;\n  const end = start + offset;\n\n  if (data.length > offset) {\n    if (page < totalPages) {\n      return data.slice(start, end);\n    }\n    return data.slice(start);\n  }\n  return data;\n}\n","import { handleFavorite } from './favoriteHandle';\nimport { handleWatchedHistory } from './handleWatchedHistory';\n\nexport const render = (selector, markup) => {\n  selector.insertAdjacentHTML('beforeend', markup);\n  handleFavorite();\n  handleWatchedHistory();\n};\n","export function smoothScroll(cardSection) {\n  const { height: cardHeight } = cardSection.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1 + 10,\n    behavior: 'smooth',\n  });\n}\n"],"names":["$luHVj","parcelRequire","$8qLFi","$a86f5b377b8c9f1d$export$b3890eb0ae9dca99","selector","markup","insertAdjacentHTML","handleFavorite","$bbqtj","handleWatchedHistory","$49b97461a2345e25$export$5713088ca0a20ab6","cardSection","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$fov3b","reviewsSwiper","enabled","$6e86ff94da33463f$var$refs","resetFormBtn","document","querySelector","form","catalogList","$6e86ff94da33463f$var$catalogData","filterParams","page","totalPages","offset","incrementPage","this","resetPage","async","data","APIGetData","getData","filteredData","$iQGQJ","filterData","length","$6e86ff94da33463f$var$loadMoreBtn","hide","slicedData","start","end","slice","$6e86ff94da33463f$var$sliceData","$gBFI5","createMarkup","error","console","log","reset","renderData","addEventListener","clearData","show","enable","category","sort","color","amount","size","price","map","el","nodeName","checked","param","parentElement","previousElementSibling","textContent","value","nextElementSibling","key","$2DEdq","default","filterWords","valueFormat","Number","parseInt","indexOf","push","$6e86ff94da33463f$var$getCheckedCheckBox","element","className","disable","disabled","classList","add","remove"],"version":3,"file":"catalog.35b541fe.js.map"}