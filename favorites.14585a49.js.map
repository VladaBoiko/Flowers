{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,aCAAC,EAAAD,EAAA,SCAAE,EAAAF,EAAA,SAEA,MAAMG,EAAM,iBDCL,MAAMC,EAAS,CAACC,EAAUC,KAC/BD,EAASE,mBAAmB,YAAaD,IACzC,EAAAL,EAAAO,kBCCiBC,SAASC,iBAAiB,YAElCC,SAAQC,GACfA,EAAQC,iBAAiB,SAASC,IAEhCC,MAAMC,iBACN,MAAMC,EAAYL,EAAQM,GAW1B,IAR8B,QAAxBJ,EAAIK,OAAOC,UAA8C,QAAxBN,EAAIK,OAAOC,WAC5CN,EAAIK,OAAOE,QAAQ,uBACrBP,EAAIK,OAAOG,UAAUC,SAAS,uBAGhC,EAAArB,EAAAsB,oBAjBc,gBAiBoBP,GAGhCA,EAAW,CACb,MAAMQ,GAAY,EAAAvB,EAAAwB,sBAAqBvB,GAEvC,GAAkB,cAAdsB,EAA2B,CAC7B,MAAME,EAAU,CAACV,IACjB,EAAAf,EAAAsB,oBAAmBrB,EAAKwB,E,MACkB,IAAjCF,EAAUG,QAAQX,KAC3BQ,EAAUI,KAAKZ,IACf,EAAAf,EAAAsB,oBAAmBrB,EAAKsB,G,MDzBV,E,yCDCxB,MAAMK,EAAO,CACXC,aAActB,SAASuB,cAAc,yBACrCC,IAAKxB,SAASuB,cAAc,sBAC5BE,KAAMzB,SAASuB,cAAc,sBAGzBG,GAA+B,EAAAjC,EAAAwB,sBAAqB,aA8B1D,SAASU,EAASC,EAASC,GACpBD,EAAQf,UAAUC,SAASe,IAAWD,EAAQf,UAAUiB,IAAID,E,CAEnE,SAASE,EAAYH,EAASC,GACxBD,EAAQf,UAAUC,SAASe,IAAWD,EAAQf,UAAUmB,OAAOH,E,CAhChC,cAAjCH,GAAwF,IAAxCA,EAA6BO,QAC/EZ,EAAKC,aAAaY,SAAS,GAAGC,YAAc,iCAC5Cd,EAAKG,IAAIW,YAAc,qBACvBd,EAAKG,IAAIY,KAAO,eAChBL,EAAYV,EAAKC,aAAaY,SAAS,GAAI,UAC3CH,EAAYV,EAAKG,IAAK,iCAEtBH,EAAKC,aAAaY,SAAS,GAAGC,YAAc,SAC5Cd,EAAKG,IAAIW,YAAc,oBACvBd,EAAKG,IAAIY,KAAO,iBAChBT,EAASN,EAAKC,aAAaY,SAAS,GAAI,UACxCP,EAASN,EAAKG,IAAK,+BAKrBa,iBACE,IACE,MAAMC,QAAahD,EAAAiD,WAAWC,UACxBC,GAAe,EAAAC,EAAAC,YAAWL,EAAMZ,GAChC7B,GAAS,EAAA+C,EAAAC,cAAaJ,GAC5B9C,EAAO0B,EAAKI,KAAM5B,E,CAClB,MAAOiD,GACPC,QAAQC,IAAIF,E,EAVdG,G","sources":["src/js/favorite-page.js","src/js/catalog/render.js","src/js/catalog/handleWatchedHistory.js"],"sourcesContent":["import { APIGetData } from './catalog/fetch-cards';\nimport { createMarkup, clearData } from './catalog/markup';\nimport { render } from './catalog/render';\nimport { handleFavorite } from './catalog/favoriteHandle';\nimport { loadFromLocalStorage } from './catalog/localStorage';\nimport { filterById } from './catalog/filter';\n\nconst refs = {\n  titleWrapper: document.querySelector('.offer__title-wrapper'),\n  btn: document.querySelector('.favorites__button'),\n  list: document.querySelector('.offer__list--fav'),\n};\n\nconst favotireListFromLocalStorage = loadFromLocalStorage('Favorites');\n\nif (favotireListFromLocalStorage === 'undefined' || favotireListFromLocalStorage.length === 0) {\n  refs.titleWrapper.children[0].textContent = 'В обраному поки що нічого нема';\n  refs.btn.textContent = 'Перейти на головну';\n  refs.btn.href = './index.html';\n  removeClass(refs.titleWrapper.children[1], 'hidden');\n  removeClass(refs.btn, 'favorites__button--centered');\n} else {\n  refs.titleWrapper.children[0].textContent = 'Обране';\n  refs.btn.textContent = 'Перейти в каталог';\n  refs.btn.href = './catalog.html';\n  addClass(refs.titleWrapper.children[1], 'hidden');\n  addClass(refs.btn, 'favorites__button--centered');\n\n  renderData();\n}\n\nasync function renderData() {\n  try {\n    const data = await APIGetData.getData();\n    const filteredData = filterById(data, favotireListFromLocalStorage);\n    const markup = createMarkup(filteredData);\n    render(refs.list, markup);\n  } catch (error) {\n    console.log(error);\n  }\n}\n// ========================================================================================\n\nfunction addClass(element, cssClass) {\n  if (!element.classList.contains(cssClass)) element.classList.add(cssClass);\n}\nfunction removeClass(element, cssClass) {\n  if (element.classList.contains(cssClass)) element.classList.remove(cssClass);\n}\n","import { handleFavorite } from './favoriteHandle';\nimport { handleWatchedHistory } from './handleWatchedHistory';\n\nexport const render = (selector, markup) => {\n  selector.insertAdjacentHTML('beforeend', markup);\n  handleFavorite();\n  handleWatchedHistory();\n};\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'EarlierWatched';\nconst currentCardId = 'CurrentCardID';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', evt => {\n      // console.log(evt.target);\n      event.preventDefault();\n      const productId = product.id;\n      if (\n        !(\n          ((evt.target.nodeName === 'svg' || evt.target.nodeName === 'use') &&\n            evt.target.closest('.product__favorite')) ||\n          evt.target.classList.contains('product__favorite')\n        )\n      ) {\n        saveToLocalStorage(currentCardId, productId);\n      }\n\n      if (productId) {\n        const savedList = loadFromLocalStorage(key);\n\n        if (savedList === 'undefined') {\n          const newList = [productId];\n          saveToLocalStorage(key, newList);\n        } else if (savedList.indexOf(productId) === -1) {\n          savedList.push(productId);\n          saveToLocalStorage(key, savedList);\n        }\n      }\n    })\n  );\n}\n"],"names":["$3zrJA","parcelRequire","$dynyT","$3LV0x","$56966dd9ca3fa1fb$var$key","$9b3785105e9d69b8$export$b3890eb0ae9dca99","selector","markup","insertAdjacentHTML","handleFavorite","document","querySelectorAll","forEach","product","addEventListener","evt","event","preventDefault","productId","id","target","nodeName","closest","classList","contains","saveToLocalStorage","savedList","loadFromLocalStorage","newList","indexOf","push","$732ea10bcbd98d8a$var$refs","titleWrapper","querySelector","btn","list","$732ea10bcbd98d8a$var$favotireListFromLocalStorage","$732ea10bcbd98d8a$var$addClass","element","cssClass","add","$732ea10bcbd98d8a$var$removeClass","remove","length","children","textContent","href","async","data","APIGetData","getData","filteredData","$iDd0l","filterById","$jwgDc","createMarkup","error","console","log","$732ea10bcbd98d8a$var$renderData"],"version":3,"file":"favorites.14585a49.js.map"}