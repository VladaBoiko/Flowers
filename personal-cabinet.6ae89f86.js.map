{"mappings":"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","sources":["src/js/menu2.js","src/js/personal-cabinet/menu.js","src/js/auth/helpers/refs.js","src/js/personal-cabinet/registration-modal.js","src/js/personal-cabinet/additional-prevent.js","src/js/auth.js","src/js/auth/helpers/helpers.js","src/js/auth/sign-up.js","src/js/auth/login.js","src/js/auth/logout.js","src/js/auth/validate.js"],"sourcesContent":["const navbarMenu = document.querySelector('.menu');\nconst burgerMenu = document.querySelector('#burger');\nconst headerMenu = document.querySelector('#header');\n\n// Open Close Navbar Menu on Click Burger\nif (burgerMenu && navbarMenu) {\n  burgerMenu.addEventListener('click', () => {\n    burgerMenu.classList.toggle('is-active');\n    navbarMenu.classList.toggle('is-active');\n  });\n}\n\n// Close Navbar Menu on Click Links\ndocument.querySelectorAll('.menu-link').forEach(link => {\n  link.addEventListener('click', () => {\n    burgerMenu.classList.remove('is-active');\n    navbarMenu.classList.remove('is-active');\n  });\n});\n\n// Fixed Navbar Menu on Window Resize\n// window.addEventListener('resize', () => {\n//   if (window.innerWidth >= 992) {\n//     if (navbarMenu.classList.contains('is-active')) {\n//       navbarMenu.classList.remove('is-active');\n//     }\n//   }\n// });\n","const refs = {\n    openMenuBtn: document.querySelector('[data-open-menu-btn]'),\n    closeMenuBtn: document.querySelector('[data-close-menu-btn]'),\n    menu: document.querySelector('[data-personal-menu]'),\n    \n    profileBtn: document.querySelector('[data-pers-btn]'),\n    ordersBtn: document.querySelector('[data-order-btn]'),\n    notifBtn: document.querySelector('[data-notif-btn]'),\n    favBtn: document.querySelector('[data-fav-btn]'),\n\n    profile: document.querySelector('[data-profile]'),\n    orders: document.querySelector('[data-pers-orders]'),\n    notif: document.querySelector('[data-pers-notif]'),\n    fav: document.querySelector('[data-pers-fav]'),\n}\n\nrefs.openMenuBtn.addEventListener('click', openMobMenu);\nrefs.closeMenuBtn.addEventListener('click', onCloseMenuBtn);\nrefs.menu.addEventListener('click', onMenuList);\n\nlet currentContent = document.querySelector('.pers-current-js');\nlet currentBtn = document.querySelector('.currentBtn');\n \nfunction onMenuList(evt) {\n    onMenuItem(evt, refs.profile, refs.profileBtn);\n    onMenuItem(evt, refs.orders, refs.ordersBtn);\n    onMenuItem(evt, refs.notif, refs.notifBtn);\n    onMenuItem(evt, refs.fav, refs.favBtn);\n}\n\nfunction onMenuItem(evt, newContent, newBtn) {\n    if (isNotNewButton(evt, newBtn)) {\n        return;\n    }\n    changeCurrentContent(newContent);\n    changeCurrentBtn(newBtn);\n}\n\nfunction isNotNewButton(evt, newBtn) {\n    return evt.target !== newBtn;\n}\n\nfunction changeCurrentContent(newContent) {\n    currentContent.classList.remove('pers-current-js');\n    currentContent.classList.add('visually-hidden');\n\n    currentContent = newContent;\n    newContent.classList.remove('visually-hidden');\n    newContent.classList.add('pers-current-js');\n    onCloseMenuBtn()\n}\n\nfunction changeCurrentBtn(newCurrentBtn) {\n    currentBtn.classList.remove('currentBtn');\n    currentBtn = newCurrentBtn;\n    newCurrentBtn.classList.add('currentBtn');\n}\n\nfunction openMobMenu() {\n    currentContent.classList.add('visually-hidden');\n    refs.menu.classList.remove('is-hidden');\n    switchBtnVisibility(refs.openMenuBtn);\n    switchBtnVisibility(refs.closeMenuBtn);\n}\n\nfunction onCloseMenuBtn() {\n    currentContent.classList.remove('visually-hidden');\n    refs.menu.classList.add('is-hidden');\n    switchBtnVisibility(refs.openMenuBtn);\n    switchBtnVisibility(refs.closeMenuBtn);\n}\n\nfunction switchBtnVisibility(btn) {\n    btn.classList.toggle('is-hidden');\n}","export const refs = {\n    headerUserIcon: document.querySelector('[data-header-user-icon]'),\n    loginForm: document.querySelector('[data-login-form]'),\n    regForm: document.querySelector('[data-reg-form]'),\n    loginSection: document.querySelector('[data-login-section]'),\n    personalCab: document.querySelector('[data-pers-cab-main]'),\n    backdrop: document.querySelector('[data-reg-modal]'),\n    body: document.querySelector(\"body\"),\n\n    openModalBtn: document.querySelector('[data-reg-modal-open]'), //Реєстрація\n    closeModalBtn: document.querySelector('[data-reg-modal-close]'), //cross\n    regSubmitBtn: document.querySelector('[data-submit-reg-btn]'), //Зареєструватися\n    loginSubmitBtn: document.querySelector('[data-login-btn]'), //Вхід\n    logoutBtn: document.querySelector('[data-logout-btn]'), //Вийти\n\n    loginFormAlertText: document.querySelector('[data-login-alert-text]'),\n    regFormAlertText: document.querySelector('[data-reg-alert-text]'),\n    alertText: document.querySelector('[data-pers-alert-text]'),\n\n    profileForm: document.querySelector('[data-profile-form]'),\n};","import { refs } from '../auth/helpers/refs';\n\nrefs.openModalBtn.addEventListener('click', onOpenModal);\nrefs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.body.classList.add('show-modal');\n  refs.openModalBtn.classList.add('is-active');\n}\n\nexport function onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.body.classList.remove('show-modal');\n  refs.openModalBtn.classList.remove('is-active');\n}\n\nfunction onBackdropClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    onCloseModal();\n  }\n}\n\nfunction onEscKeyPress(evt) {\n  if (evt.code === 'Escape') {\n    onCloseModal();\n    refs.openModalBtn.blur();\n  }\n}","const refs = {\n    profileForm: document.querySelector('[data-profile-form]'),\n    notifForm: document.querySelector('[data-pers-notif-form]'),\n    profileFormBtn: document.querySelector('[data-profile-form-btn]'),\n    notifFormBtn: document.querySelector('[data-notif-form-btn]'),\n}\n\nrefs.profileForm.addEventListener('submit', onSubmitProfileForm);\nrefs.notifForm.addEventListener('submit', onSubmitNotifForm);\n\nfunction onSubmitProfileForm(evt) {\n    onSubmit(evt);\n    refs.profileFormBtn.blur();\n}\n\nfunction onSubmitNotifForm(evt) {\n    onSubmit(evt);\n    refs.notifFormBtn.blur();\n}\n\nfunction onSubmit(evt) {\n    evt.preventDefault();\n}","import axios from 'axios';\n\nexport const server = axios.create({\n  baseURL: 'https://server-flower.herokuapp.com/user',\n});\n\nexport const token = {\n  set(token) {\n    server.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset() {\n    server.defaults.headers.common.Authorization = '';\n  },\n};\n\n// Реєстрація\nexport const signUp = async body => {\n  try {\n    const response = await server.post('/signup', body);\n    return response;\n  } catch (error) {\n    return error.response.status;\n  }\n};\n\n// Авторизація\nexport const logIn = async body => {\n  try {\n    const { data } = await server.post('/', body);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    return error.response.status;\n  }\n};\n\n// Вихід\nexport const logOut = async () => {\n  try {\n    const { status } = await server.get('/');\n    if (status === 204) {\n      token.unset();\n    }\n    return status;\n  } catch (error) {\n    return error.response.status;\n  }\n};\n\n// Перевірка. Користувач авторизований?\nexport const validate = async () => {\n  try {\n    const response = await server.get('/validate');\n    return response;\n  } catch (error) {\n    return error.response;\n  }\n};","export function showAlertText(alertRef, textContent) {\n  alertRef.textContent = textContent;\n  alertRef.style.opacity = 1;\n  setTimeout(() => {\n    alertRef.style.opacity = 0;\n  }, 2500);\n}","import { refs } from './helpers/refs';\nimport { signUp } from '../auth';\nimport { onCloseModal } from '../personal-cabinet/registration-modal';\nimport { showAlertText } from './helpers/helpers';\n    \nexport let userName = 'name';\n\nrefs.regForm.addEventListener('submit', onSignupSubmit);\n\nfunction onSignupSubmit(evt) {\n    evt.preventDefault();\n    refs.regSubmitBtn.blur();\n\n    const userInfo = {\n        name: null,\n        email: null,\n        password: null,\n        confirmPassword: null,\n    };\n    const {\n        elements: { name, email, password, confirmPassword}\n    } = evt.currentTarget;\n\n    userInfo.name = name.value;\n    userInfo.email = email.value;\n    userInfo.password = password.value;\n    userInfo.confirmPassword = confirmPassword.value;\n    \n    if (name.value === '' ||\n        email.value === '' ||\n        password.value === '' ||\n        confirmPassword.value === '') {\n        showAlertText(refs.regFormAlertText, 'Будь ласка, заповніть усі поля');\n        return;\n    }\n\n    if (password.value !== confirmPassword.value) {\n        showAlertText(refs.regFormAlertText, 'Паролі не співпадають, спробуйте ще раз');\n        return;\n    }\n\n    refs.regForm.reset();\n    onCloseModal();\n    handleSignUpRes(userInfo);\n}\n\nasync function handleSignUpRes(userInfo) {\n    const res = await signUp(userInfo);\n    \n    if (res === 409) {\n        showAlertText(refs.alertText, 'Такий користувач вже зареєстрований');\n    } else {\n        showAlertText(refs.alertText, 'Для продовження реєстрації, підтвердьте Вашу пошту');\n    }\n}\n// 409: \"Email in use\"","import { refs } from './helpers/refs';\nimport { logIn } from '../auth';\nimport { showAlertText } from './helpers/helpers';\n\nexport const TOKEN = 'token';\nexport const userName = 'name';\n\ncheckActivePage();\n\nexport function checkActivePage() {\n  if (refs.loginSection === null) {\n    return;\n  }\n  refs.loginForm.addEventListener('submit', onLoginSubmit);\n}\n\nfunction onLoginSubmit(evt) {\n  evt.preventDefault();\n\n  refs.loginSubmitBtn.blur();\n\n  const userInfo = { email: null, password: null };\n  const {\n    elements: { email, password },\n  } = evt.currentTarget;\n\n  userInfo.email = email.value;\n  userInfo.password = password.value;\n\n  if (email.value === '' || password.value === '') {\n    showAlertText(refs.loginFormAlertText, 'Будь ласка, заповніть усі поля');\n    return;\n  }\n  handleLoginRes(userInfo);\n}\n\nexport async function handleLoginRes(userData) {\n  const res = await logIn(userData);\n\n  if (res === 401) {\n    showAlertText(refs.loginFormAlertText, 'Електронна пошта або пароль невірні');\n  } else {\n    goToUserCab();\n    localStorage.setItem(TOKEN, res.token);\n    localStorage.setItem(userName, res.name);\n    refs.profileForm.name.value = res.name;\n    refs.loginForm.reset();\n  }\n}\n\nfunction goToUserCab() {\n  refs.loginSection.classList.add('is-hidden');\n  refs.personalCab.classList.remove('is-hidden');\n  refs.headerUserIcon.addEventListener('click', e => e.preventDefault());\n}\n\n// 401 \"user does not exist\"\n// else if (!res.isActivate) {\n//     console.log(\"please, check your email for confirm\");\n// }","import { refs } from './helpers/refs';\nimport { logOut } from '../auth';\nimport { TOKEN } from '../auth/login';\nimport { userName } from './sign-up';\n\nrefs.logoutBtn.addEventListener('click', onLogoutBtn);\n\nasync function onLogoutBtn() {\n    await logOut();\n    localStorage.removeItem(TOKEN);\n    localStorage.removeItem(userName);\n    logOutUserCab();\n}\n\nfunction logOutUserCab() {\n    refs.loginSection.classList.remove('is-hidden');\n    refs.personalCab.classList.add('is-hidden');\n}","import { refs } from './helpers/refs';\nimport { token, validate } from '../auth';\nimport { TOKEN } from './login';\n\n\nloginReload();\n\nexport function loginReload() {\n    const localToken = localStorage.getItem('token');\n    if (localToken === null) {\n        return;\n    }\n    token.set(localToken);\n    handleValidateRes();\n}\n\nasync function handleValidateRes() {\n    const res = await validate();\n    if (res === 401) {\n        localStorage.removeItem(TOKEN);\n    } else {\n        localStorage.setItem(TOKEN, res.data.token);\n        let userName = localStorage.getItem('name');\n        if (refs.loginSection === null) {\n            return\n        }\n        showToUserCab(userName)\n    }\n}\n\nfunction showToUserCab(userName) {\n    refs.loginSection.classList.add('is-hidden');\n    refs.personalCab.classList.remove('is-hidden');\n    refs.profileForm.name.value = userName;\n    refs.headerUserIcon.addEventListener('click', e => e.preventDefault());\n}\n// 401 \"message\": \"Not authorized\""],"names":["$da99c6c9f79dde56$var$navbarMenu","document","querySelector","$da99c6c9f79dde56$var$burgerMenu","addEventListener","classList","toggle","querySelectorAll","forEach","link","remove","$9d37ff60853f730e$var$refs","openMenuBtn","closeMenuBtn","menu","profileBtn","ordersBtn","notifBtn","favBtn","profile","orders","notif","fav","$9d37ff60853f730e$var$currentContent","add","$9d37ff60853f730e$var$switchBtnVisibility","$9d37ff60853f730e$var$onCloseMenuBtn","evt","$9d37ff60853f730e$var$onMenuItem","$9d37ff60853f730e$var$currentBtn","newContent","newBtn","newCurrentBtn","target","$9d37ff60853f730e$var$isNotNewButton","$9d37ff60853f730e$var$changeCurrentContent","btn","$bc85d983d32d6970$export$21666b427502ea6d","headerUserIcon","loginForm","regForm","loginSection","personalCab","backdrop","body","openModalBtn","closeModalBtn","regSubmitBtn","loginSubmitBtn","logoutBtn","loginFormAlertText","regFormAlertText","alertText","profileForm","$8161a4e3310b8b09$export$9dc820945641dd09","window","removeEventListener","$8161a4e3310b8b09$var$onEscKeyPress","code","blur","currentTarget","$81f16b76130abf41$var$refs","notifForm","profileFormBtn","notifFormBtn","$81f16b76130abf41$var$onSubmit","preventDefault","$8953c87b21bd174e$export$b4e470744154116f","$parcel$interopDefault","parcelRequire","create","baseURL","$8953c87b21bd174e$export$9e1725a4cfeada27","set","token","defaults","headers","common","Authorization","unset","$8953c87b21bd174e$export$cf64224bcd829024","async","post","error","response","status","$8953c87b21bd174e$export$dcb3afa56f3b80bd","data","$8953c87b21bd174e$export$464881f0a7cf0212","get","$8953c87b21bd174e$export$a22775fa5e2eebd9","$333ec0a4757a3970$export$20a080a6d09179ae","alertRef","textContent","style","opacity","setTimeout","userInfo","name","email","password","confirmPassword","elements","value","reset","$e938be478c1afa94$var$handleSignUpRes","$fc1b9b88a3a86dda$var$onLoginSubmit","userData","res","e","localStorage","setItem","$fc1b9b88a3a86dda$export$2452d42fe06db888","$fc1b9b88a3a86dda$export$8df2a8e8a0ed8ef5","removeItem","localToken","getItem","userName","$9da368f66b88c572$var$showToUserCab","$9da368f66b88c572$var$handleValidateRes","$9da368f66b88c572$export$b2f2fd4113e104af"],"version":3,"file":"personal-cabinet.6ae89f86.js.map"}