{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BCAAC,EAAAD,EAAA,SAEA,MAAME,EAAM,iB,8BCAL,MAAMC,EAAa,IAAIC,EAF9BJ,EAAA,UAE0B,CAAW,yBAA0B,CAC7DK,WAAY,CACVC,GAAI,qBACJC,WAAW,GAEbC,SAAU,CACRC,MAAO,IACPC,sBAAsB,GAExBC,MAAO,IACPC,MAAM,I,iBFART,EAAWU,SAAU,EACrBC,EAAAC,cAAcF,SAAU,EGbC,CAAAG,IACvB,MAAMC,EAAO,CACXC,aAAcC,SAASC,cAAc,0BACrCC,cAAeF,SAASC,cAAc,2BACtCE,SAAUH,SAASC,cAAc,qBACjCG,KAAMJ,SAASC,cAAc,SAc/B,SAASI,IACPC,OAAOC,oBAAoB,UAAWC,GACtCV,EAAKM,KAAKK,UAAUC,OAAO,cAC3BZ,EAAKC,aAAaU,UAAUC,OAAO,aACnCb,EAAWR,SAASsB,O,CAStB,SAASH,EAAcI,GACJ,WAAbA,EAAIC,OACNR,IACAP,EAAKC,aAAae,O,CA3BtBhB,EAAKC,aAAagB,iBAAiB,SAInC,WACET,OAAOS,iBAAiB,UAAWP,GACnCV,EAAKM,KAAKK,UAAUO,IAAI,cACxBlB,EAAKC,aAAaU,UAAUO,IAAI,aAChCnB,EAAWR,SAAS4B,M,IAPtBnB,EAAKI,cAAca,iBAAiB,QAASV,GAC7CP,EAAKK,SAASY,iBAAiB,SAgB/B,SAAyBH,GACnBA,EAAIM,gBAAkBN,EAAIO,QAC5Bd,G,KHdN,CAAUrB,GAEV,MAAMoC,EAAO,CACXC,aAAcrB,SAASC,cAAc,gCACrCqB,SAAUtB,SAASC,cAAc,4BACjCsB,eAAgBvB,SAASC,cAAc,kCACvCuB,UAAWxB,SAASC,cAAc,6BAClCwB,eAAgBzB,SAASC,cAAc,yCAGnCyB,GAAqB,EAAA5C,EAAA6C,sBAAqB,mBAIhDC,iBACE,IACE,MAAMC,QAAajD,EAAAkD,WAAWC,UAE9B,IAAK,MAAMC,KAAgBC,EAAAC,SAAU,CACnC,MAAMC,EACJF,EAAAC,SAASF,KAAkBC,EAAAC,SAAST,gBAChC,EAAAQ,EAAAG,iBAAgBP,EAAMI,EAAAC,SAASF,KAC/B,EAAAC,EAAAG,iBAAgBP,EAAMI,EAAAC,SAASF,GAAeN,GAC9CW,GAAS,EAAAC,EAAAC,cAAaJ,GAC5Bf,EAAKY,GAAcQ,mBAAmB,YAAaH,E,EAErD,EAAAI,EAAAC,kBClCe1C,SAAS2C,iBAAiB,YAElCC,SAAQC,GACfA,EAAQ9B,iBAAiB,SAASH,IAEhC,MAAMkC,EAAYD,EAAQE,GAW1B,IAR8B,QAAxBnC,EAAIO,OAAO6B,UAA8C,QAAxBpC,EAAIO,OAAO6B,WAC5CpC,EAAIO,OAAO8B,QAAQ,uBACrBrC,EAAIO,OAAOV,UAAUyC,SAAS,uBAGhC,EAAApE,EAAAqE,oBAhBc,gBAgBoBL,GAGhCA,EAAW,CACb,MAAMM,GAAY,EAAAtE,EAAA6C,sBAAqB5C,GAEvC,GAAkB,cAAdqE,EAA2B,CAC7B,MAAMC,EAAU,CAACP,IACjB,EAAAhE,EAAAqE,oBAAmBpE,EAAKsE,E,MACkB,IAAjCD,EAAUE,QAAQR,KAC3BM,EAAUG,KAAKT,IACf,EAAAhE,EAAAqE,oBAAmBpE,EAAKqE,G,ODY9B,MAAOI,GACPC,QAAQC,IAAIF,E,EAjBhBG,E","sources":["src/js/index-page-offers.js","src/js/catalog/handleWatchedHistory.js","src/js/hero-slider.js","src/js/hero-modal.js"],"sourcesContent":["import { APIGetData } from './catalog/fetch-cards';\nimport { filterBySection, sections } from './catalog/filter';\nimport { handleFavorite } from './catalog/favoriteHandle';\nimport { handleWatchedHistory } from './catalog/handleWatchedHistory';\nimport { loadFromLocalStorage } from './catalog/localStorage';\nimport { createMarkup } from './catalog/markup';\n\nimport { heroSwiper } from './hero-slider';\nimport { reviewsSwiper } from './reviews-slider';\nimport { heroModal } from './hero-modal';\n\n\nheroSwiper.enabled = true;\nreviewsSwiper.enabled = true;\nheroModal(heroSwiper);\n\nconst refs = {\n  offerSpecial: document.querySelector('.offer--special .offer__list'),\n  dayOffer: document.querySelector('.offer--day .offer__list'),\n  recommendOffer: document.querySelector('.offer--recommend .offer__list'),\n  offerPlus: document.querySelector('.offer--plus .offer__list'),\n  earlierWatched: document.querySelector('.offer--earlier-watched .offer__list'),\n};\n\nconst earlierWatchedList = loadFromLocalStorage('EarlierWatched');\n\nrenderData();\n\nasync function renderData() {\n  try {\n    const data = await APIGetData.getData();\n\n    for (const offerSection in sections) {\n      const filteredData =\n        sections[offerSection] !== sections.earlierWatched\n          ? filterBySection(data, sections[offerSection])\n          : filterBySection(data, sections[offerSection], earlierWatchedList);\n      const markup = createMarkup(filteredData);\n      refs[offerSection].insertAdjacentHTML('beforeend', markup);\n    }\n    handleFavorite();\n    handleWatchedHistory();\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'EarlierWatched';\nconst currentCardId = 'CurrentCardID';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', evt => {\n      // event.preventDefault();\n      const productId = product.id;\n      if (\n        !(\n          ((evt.target.nodeName === 'svg' || evt.target.nodeName === 'use') &&\n            evt.target.closest('.product__favorite')) ||\n          evt.target.classList.contains('product__favorite')\n        )\n      ) {\n        saveToLocalStorage(currentCardId, productId);\n      }\n\n      if (productId) {\n        const savedList = loadFromLocalStorage(key);\n\n        if (savedList === 'undefined') {\n          const newList = [productId];\n          saveToLocalStorage(key, newList);\n        } else if (savedList.indexOf(productId) === -1) {\n          savedList.push(productId);\n          saveToLocalStorage(key, savedList);\n        }\n      }\n    })\n  );\n}\n","import Swiper from 'swiper/swiper-bundle';\n\nexport const heroSwiper = new Swiper('.hero-swiper-container', {\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n  autoplay: {\n    delay: 3000,\n    disableOnInteraction: false,\n  },\n  speed: 3000,\n  loop: true,\n});\n","export const heroModal = heroSwiper => {\n  const refs = {\n    openModalBtn: document.querySelector('[data-hero-modal-open]'),\n    closeModalBtn: document.querySelector('[data-hero-modal-close]'),\n    backdrop: document.querySelector('[data-hero-modal]'),\n    body: document.querySelector('body'),\n  };\n\n  refs.openModalBtn.addEventListener('click', onOpenModal);\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  refs.backdrop.addEventListener('click', onBackdropClick);\n\n  function onOpenModal() {\n    window.addEventListener('keydown', onEscKeyPress);\n    refs.body.classList.add('show-modal');\n    refs.openModalBtn.classList.add('is-active');\n    heroSwiper.autoplay.stop();\n  }\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.body.classList.remove('show-modal');\n    refs.openModalBtn.classList.remove('is-active');\n    heroSwiper.autoplay.start();\n  }\n\n  function onBackdropClick(evt) {\n    if (evt.currentTarget === evt.target) {\n      onCloseModal();\n    }\n  }\n\n  function onEscKeyPress(evt) {\n    if (evt.code === 'Escape') {\n      onCloseModal();\n      refs.openModalBtn.blur();\n    }\n  }\n};\n"],"names":["$3zrJA","parcelRequire","$3LV0x","$56966dd9ca3fa1fb$var$key","$56ca916a5cc38738$export$614d337d20b30d74","$parcel$interopDefault","pagination","el","clickable","autoplay","delay","disableOnInteraction","speed","loop","enabled","$g0iWm","reviewsSwiper","heroSwiper","refs","openModalBtn","document","querySelector","closeModalBtn","backdrop","body","onCloseModal","window","removeEventListener","onEscKeyPress","classList","remove","start","evt","code","blur","addEventListener","add","stop","currentTarget","target","$5a9f79ede2c4e534$var$refs","offerSpecial","dayOffer","recommendOffer","offerPlus","earlierWatched","$5a9f79ede2c4e534$var$earlierWatchedList","loadFromLocalStorage","async","data","APIGetData","getData","offerSection","$iDd0l","sections","filteredData","filterBySection","markup","$jwgDc","createMarkup","insertAdjacentHTML","$dynyT","handleFavorite","querySelectorAll","forEach","product","productId","id","nodeName","closest","contains","saveToLocalStorage","savedList","newList","indexOf","push","error","console","log","$5a9f79ede2c4e534$var$renderData"],"version":3,"file":"index.016063fe.js.map"}