function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a);var o=a("aGajG"),i=a("gBFI5"),s=a("91JdT");s=a("91JdT");const c=(e,t)=>{e.insertAdjacentHTML("beforeend",t),document.querySelectorAll(".product__favorite").forEach((e=>e.addEventListener("click",(t=>{t.preventDefault();const r=e.closest(".product").id;if(r){e.classList.toggle("checked");const t=(0,s.loadFromLocalStorage)("Favorites");let n=null;if(!t||!Array.isArray(t))return n=[r],void(0,s.saveToLocalStorage)("Favorites",n);if(-1===t.indexOf(r))return n=[...t,r],void(0,s.saveToLocalStorage)("Favorites",n);if(t.indexOf(r)>-1)return n=t.filter((e=>e!==r)),(0,s.saveToLocalStorage)("Favorites",n),void(!e.classList.contains("checked")&&document.querySelector(".favorites.offer"))}})))),document.querySelectorAll(".product").forEach((e=>e.addEventListener("click",(t=>{const r=e.id;if(("svg"===t.target.nodeName||"use"===t.target.nodeName)&&t.target.closest(".product__favorite")||t.target.classList.contains("product__favorite")||(0,s.saveToLocalStorage)("CurrentCardID",r),r){const e=(0,s.loadFromLocalStorage)("EarlierWatched");if(e)-1===e.indexOf(r)&&(e.push(r),(0,s.saveToLocalStorage)("EarlierWatched",e));else{const e=[r];(0,s.saveToLocalStorage)("EarlierWatched",e)}}}))))},l=e=>{e.innerHTML=""};var f,u=a("8MnzK"),d=(s=a("91JdT"),a("fov3b")),g=/^\s+|\s+$/g,m=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,v=/^0o[0-7]+$/i,h=parseInt,y="object"==typeof t&&t&&t.Object===Object&&t,b="object"==typeof self&&self&&self.Object===Object&&self,L=y||b||Function("return this")(),T=Object.prototype.toString,S=Math.max,x=Math.min,E=function(){return L.Date.now()};function w(e,t,r){var n,a,o,i,s,c,l=0,f=!1,u=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var r=n,o=a;return n=a=void 0,l=t,i=e.apply(o,r)}function m(e){return l=e,s=setTimeout(v,t),f?g(e):i}function p(e){var r=e-c;return void 0===c||r>=t||r<0||u&&e-l>=o}function v(){var e=E();if(p(e))return h(e);s=setTimeout(v,function(e){var r=t-(e-c);return u?x(r,o-(e-l)):r}(e))}function h(e){return s=void 0,d&&n?g(e):(n=a=void 0,i)}function y(){var e=E(),r=p(e);if(n=arguments,a=this,c=e,r){if(void 0===s)return m(c);if(u)return s=setTimeout(v,t),g(c)}return void 0===s&&(s=setTimeout(v,t)),i}return t=P(t)||0,O(r)&&(f=!!r.leading,o=(u="maxWait"in r)?S(P(r.maxWait)||0,t):o,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,n=c=a=s=void 0},y.flush=function(){return void 0===s?i:h(E())},y}function O(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function P(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==T.call(e)}(e))return NaN;if(O(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=O(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var r=p.test(e);return r||v.test(e)?h(e.slice(2),r?2:8):m.test(e)?NaN:+e}f=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return O(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),w(e,t,{leading:n,maxWait:t,trailing:a})},d.reviewsSwiper.enabled=!0;const j={resetFormBtn:document.querySelector(".filter-catalog__clear-all-btn"),form:document.querySelector(".filter-catalog"),catalogList:document.querySelector(".catalog-list")},N={selector:j.catalogList,filterParams:{},page:1,totalPages:1,offset:9,sorting:"rating,1",incrementPage(){this.page+=1},resetPage(){this.page=1,this.filterParams={}},async renderData(){try{const e=await o.APIGetData.getDataByFilter(this.filterParams,this.page,this.offset,this.sorting);this.totalPages=e.totalPage;const t=(0,i.createMarkup)(e.result);c(j.catalogList,t),this.page>=this.totalPages?_.hide():(_.enable(),_.show())}catch(e){console.log("render data on catalog-page",e)}}};j.form.reset(),N.renderData(),j.resetFormBtn.addEventListener("click",(()=>{N.resetPage(),l(j.catalogList),j.form.reset(),N.renderData()})),j.form.addEventListener("change",e(f)((()=>{l(j.catalogList),N.resetPage(),N.filterParams=function(){const e={category:[],sort:[],color:[],amount:[],size:[],form:[],price:[]};return[...j.form].map((t=>{if("INPUT"===t.nodeName&&t.checked){const r=t.parentElement.parentElement.previousElementSibling.textContent,n=t.nextElementSibling.textContent,a=(0,s.getKey)(r,u.filterWords),o="amount"===a||"size"===a?Number.parseInt(n):n;if("price"!==a)-1===e[a].indexOf(n)&&e[a].push(o);else{const r=t.value.split(",");e[a]=r}}})),Object.entries(e).reduce(((e,t)=>{let r=null;return t[1].length>0&&(r="price"!==t[0]?{[t[0]]:t[1].join(",")}:{priseMin:t[1][0],priseMax:t[1][1]}),r?{...e,...r}:{...e}}),{})}(),N.renderData()})),300);const _={element:document.querySelector(".catalog__btn"),className:"hidden",disable(){this.element.disabled=!0},enable(){this.element.disabled=!1},hide(){this.element.classList.add(this.className)},show(){this.element.classList.remove(this.className)}};_.element.addEventListener("click",(()=>{_.disable(),N.incrementPage(),N.renderData(),(0,s.smoothScroll)(j.catalogList)}));
//# sourceMappingURL=catalog.1efb7ae8.js.map
