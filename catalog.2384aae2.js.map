{"mappings":"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","sources":["src/js/catalog-page.js","src/js/catalog/render.js","src/js/catalog/handleWatchedHistory.js"],"sourcesContent":["import { APIGetData } from './catalog/fetch-cards';\nimport { createMarkup, clearData } from './catalog/markup';\nimport { render } from './catalog/render';\nimport { handleFavorite } from './catalog/favoriteHandle';\nimport { handleWatchedHistory } from './catalog/handleWatchedHistory';\n// import data from '../products.json';\n\nimport getKey from './catalog/getKey';\n\nconst refs = {\n  resetFormBtn: document.querySelector('.filter-catalog__clear-all-btn'),\n  form: document.querySelector('.filter-catalog'),\n  catalogList: document.querySelector('.catalog-list'),\n};\n\nconst loadMoreBtn = {\n  element: document.querySelector('.catalog__btn'),\n  className: 'hidden',\n  disable() {\n    this.element.disabled = true;\n  },\n  enable() {\n    this.element.disabled = false;\n  },\n  hide() {\n    this.element.classList.add(this.className);\n  },\n  show() {\n    this.element.classList.remove(this.className);\n  },\n};\n\nconst filterWords = {\n  category: 'Категорія',\n  sort: 'Вид',\n  color: 'Колір',\n  amount: 'Кількість',\n  size: 'Розмір',\n  form: 'Форма букету',\n  price: 'Ціна',\n};\n\nconst catalogData = {\n  data: [],\n  selector: refs.catalogList,\n  filterParams: {},\n  page: 1,\n  limit: 10,\n  incrementPage() {\n    this.page += 1;\n  },\n  resetPage() {\n    this.page = 1;\n    this.filterParams = {};\n  },\n  async renderData() {\n    try {\n      this.data = await APIGetData.getData();\n      const filterKeys = Object.keys(filterWords);\n      if (Object.keys(this.filterParams).length) {\n        const filterByCategory = this.data.filter(card => {\n          if (this.filterParams[filterKeys[0]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[0]].includes(card[filterKeys[0]]);\n        });\n\n        const filterByType = filterByCategory.filter(card => {\n          if (this.filterParams[filterKeys[1]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[1]].includes(card[filterKeys[1]]);\n        });\n\n        const filterByColor = filterByType.filter(card => {\n          if (this.filterParams[filterKeys[2]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[2]].includes(card[filterKeys[2]]);\n        });\n\n        const filterByAmount = filterByColor.filter(card => {\n          if (this.filterParams[filterKeys[3]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[3]].includes(card[filterKeys[3]]);\n        });\n\n        const filterBySize = filterByAmount.filter(card => {\n          if (this.filterParams[filterKeys[4]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[4]].includes(card[filterKeys[4]]);\n        });\n\n        const filterByForm = filterBySize.filter(card => {\n          if (this.filterParams[filterKeys[5]].length === 0) {\n            return true;\n          }\n          return this.filterParams[filterKeys[5]].includes(card[filterKeys[5]]);\n        });\n\n        const filterByPrice = filterByForm.filter(card => {\n          if (this.filterParams[filterKeys[6]].length === 0) {\n            return true;\n          }\n\n          let cardPriceRange = '';\n          if (card.price < 30) {\n            cardPriceRange = 'до 30';\n          } else if (card.price >= 30 && card.price < 45) {\n            cardPriceRange = '30 - 45';\n          } else if (card.price >= 45 && card.price < 65) {\n            cardPriceRange = '45 - 65';\n          } else if (card.price >= 65 && card.price < 80) {\n            cardPriceRange = '65 - 80';\n          } else if (card.price >= 80) {\n            cardPriceRange = 'від 80';\n          }\n\n          return this.filterParams[filterKeys[6]].includes(cardPriceRange);\n        });\n\n        this.data = filterByPrice;\n      }\n\n      const markup = createMarkup(this.data);\n      render(refs.catalogList, markup);\n      // refs.catalogList.insertAdjacentHTML('beforeend', markup);\n      handleFavorite();\n      handleWatchedHistory();\n    } catch (error) {\n      console.log(error);\n    }\n\n    // try {\n    //   await queryAndRender({ selector: this.selector, params: this.params, page: this.page, limit: this.limit });\n    //   handleFavorite();\n    // } catch (error) {\n    //   console.log(error);\n    // }\n  },\n};\n\nfunction getChececkedCheckBox() {\n  const filterData = {\n    category: [],\n    sort: [],\n    color: [],\n    amount: [],\n    size: [],\n    form: [],\n    price: [],\n  };\n  [...refs.form].map(el => {\n    if (el.nodeName === 'INPUT' && el.checked) {\n      const param = el.parentElement.parentElement.previousElementSibling.textContent;\n      const value = el.nextElementSibling.textContent;\n\n      const key = getKey(param, filterWords);\n      const valueFormat = key === 'amount' || key === 'size' ? Number.parseInt(value) : value;\n      filterData[key].indexOf(value) === -1 && filterData[key].push(valueFormat);\n    }\n  });\n  return filterData;\n}\n\nrefs.form.reset();\ncatalogData.renderData();\n\nrefs.resetFormBtn.addEventListener('click', () => {\n  catalogData.resetPage();\n  refs.form.reset();\n  catalogData.renderData();\n});\n\nrefs.form.addEventListener('change', () => {\n  clearData(refs.catalogList);\n  catalogData.resetPage();\n  catalogData.filterParams = getChececkedCheckBox();\n  catalogData.renderData();\n});\n\n// loadMoreBtn.element.addEventListener('click', () => {\n//   loadMoreBtn.disable();\n//   catalogData.incrementPage();\n//   catalogData.renderData();\n//   loadMoreBtn.enable();\n// });\n","export const render = (selector, markup) => {\n  selector.insertAdjacentHTML('beforeend', markup);\n};\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'EarlierWatched';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', event => {\n      // event.preventDefault();\n\n      const productID = product.id;\n      if (productID) {\n        const savedListFav = loadFromLocalStorage(key);\n\n        if (savedListFav === 'undefined') {\n          const newListFav = [productID];\n          saveToLocalStorage(key, newListFav);\n        } else if (savedListFav.indexOf(productID) === -1) {\n          savedListFav.push(productID);\n          saveToLocalStorage(key, savedListFav);\n        }\n      }\n    })\n  );\n}\n"],"names":["$luHVj","parcelRequire","$a86f5b377b8c9f1d$export$b3890eb0ae9dca99","selector","markup","insertAdjacentHTML","$5rfeO","$6e86ff94da33463f$var$refs","resetFormBtn","document","querySelector","form","catalogList","$6e86ff94da33463f$var$filterWords","category","sort","color","amount","size","price","$6e86ff94da33463f$var$catalogData","data","filterParams","page","limit","incrementPage","this","resetPage","async","APIGetData","getData","filterKeys","Object","keys","length","filterByCategory","filter","card","includes","filterByColor","filterBySize","filterByPrice","cardPriceRange","$gBFI5","createMarkup","$8qLFi","handleFavorite","querySelectorAll","forEach","product","addEventListener","event","productID","id","savedListFav","loadFromLocalStorage","newListFav","saveToLocalStorage","indexOf","push","error","console","log","reset","renderData","clearData","filterData","map","el","nodeName","checked","param","parentElement","previousElementSibling","textContent","value","nextElementSibling","key","$2DEdq","default","valueFormat","Number","parseInt","$6e86ff94da33463f$var$getChececkedCheckBox"],"version":3,"file":"catalog.2384aae2.js.map"}