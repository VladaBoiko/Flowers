{"mappings":"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","sources":["src/js/menu.js","src/js/index-page-offers.js","src/js/catalog/handleFavorite.js","src/js/catalog/handleWatchedHistory.js","src/js/hero-slider.js","src/js/hero-modal.js","src/js/filter-section.js"],"sourcesContent":["const navbarMenu = document.querySelector('#menu');\nconst burgerMenu = document.querySelector('#burger');\nconst headerMenu = document.querySelector('#header');\n\n// Open Close Navbar Menu on Click Burger\nif (burgerMenu && navbarMenu) {\n  burgerMenu.addEventListener('click', () => {\n    burgerMenu.classList.toggle('is-active');\n    navbarMenu.classList.toggle('is-active');\n  });\n}\n\n// Close Navbar Menu on Click Links\ndocument.querySelectorAll('.menu-link').forEach(link => {\n  link.addEventListener('click', () => {\n    burgerMenu.classList.remove('is-active');\n    navbarMenu.classList.remove('is-active');\n  });\n});\n\n// Fixed Navbar Menu on Window Resize\nwindow.addEventListener('resize', () => {\n  if (window.innerWidth >= 992) {\n    if (navbarMenu.classList.contains('is-active')) {\n      navbarMenu.classList.remove('is-active');\n    }\n  }\n});\n","import { APIGetData } from './api/fetch-cards';\nimport { sections } from './catalog/const';\nimport { handleFavorite } from './catalog/handleFavorite';\nimport { handleWatchedHistory } from './catalog/handleWatchedHistory';\n\nimport { createMarkup } from './catalog/markup';\nimport { addClass, removeClass, loadFromLocalStorage } from './catalog/utils';\n\nimport { heroSwiper } from './hero-slider';\nimport { reviewsSwiper } from './reviews-slider';\nimport { heroModal } from './hero-modal';\n\nheroSwiper.enabled = true;\nreviewsSwiper.enabled = true;\nheroModal(heroSwiper);\n\nconst refs = {\n  offerSpecial: document.querySelector('.offer--special .offer__list'),\n  dayOffer: document.querySelector('.offer--day .offer__list'),\n  recommendOffer: document.querySelector('.offer--recommend .offer__list'),\n  offerPlus: document.querySelector('.offer--plus .offer__list'),\n  earlierWatched: document.querySelector('.offer--earlier-watched .offer__list'),\n};\n\nrenderData();\n\nasync function renderData() {\n  for (const offerSection in sections) {\n    try {\n      let data = null;\n\n      if (sections[offerSection] !== sections.earlierWatched) {\n        data = await APIGetData.getDataBySection(sections[offerSection]);\n      } else {\n        const localStorageData = loadFromLocalStorage('EarlierWatched');\n\n        if (localStorageData) {\n          const earlierWatchedList = localStorageData.join(',');\n          data = await APIGetData.getDataByID(earlierWatchedList, 1, 4);\n          removeClass(refs.earlierWatched.closest('.offer'), 'hidden');\n        } else {\n          addClass(refs.earlierWatched.closest('.offer'), 'hidden');\n        }\n      }\n\n      if (data) {\n        const markup = createMarkup(data);\n        refs[offerSection].insertAdjacentHTML('beforeend', markup);\n      }\n    } catch (error) {\n      console.log('render-data on index-page', error);\n    }\n  }\n  handleFavorite();\n  handleWatchedHistory();\n}\n","import { saveToLocalStorage, loadFromLocalStorage } from './utils';\n// import { loadDataFavoritePage } from '../favorite-page';\n\nconst key = 'Favorites';\n\nexport function handleFavorite() {\n  const favoriteBtns = document.querySelectorAll('.product__favorite');\n\n  favoriteBtns.forEach(favoriteBtn =>\n    favoriteBtn.addEventListener('click', event => {\n      event.preventDefault();\n      const productID = favoriteBtn.closest('.product').id;\n\n      if (productID) {\n        favoriteBtn.classList.toggle('checked');\n\n        const savedListFav = loadFromLocalStorage(key);\n        let newListFav = null;\n\n        if (!savedListFav || !Array.isArray(savedListFav)) {\n          newListFav = [productID];\n          saveToLocalStorage(key, newListFav);\n          return;\n        }\n\n        if (savedListFav.indexOf(productID) === -1) {\n          newListFav = [...savedListFav, productID];\n          saveToLocalStorage(key, newListFav);\n          return;\n        }\n        if (savedListFav.indexOf(productID) > -1) {\n          newListFav = savedListFav.filter(favId => favId !== productID);\n          saveToLocalStorage(key, newListFav);\n\n          if (!favoriteBtn.classList.contains('checked') && document.querySelector('.favorites.offer')) {\n            // loadDataFavoritePage();\n          }\n          return;\n        }\n      }\n    })\n  );\n}\n","import { saveToLocalStorage, loadFromLocalStorage } from './utils';\n\nconst key = 'EarlierWatched';\nconst currentCardId = 'CurrentCardID';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', evt => {\n      // event.preventDefault();\n      const productId = product.id;\n      if (\n        !(\n          ((evt.target.nodeName === 'svg' || evt.target.nodeName === 'use') &&\n            evt.target.closest('.product__favorite')) ||\n          evt.target.classList.contains('product__favorite')\n        )\n      ) {\n        saveToLocalStorage(currentCardId, productId);\n      }\n\n      if (productId) {\n        const savedList = loadFromLocalStorage(key);\n\n        if (!savedList) {\n          const newList = [productId];\n          saveToLocalStorage(key, newList);\n        } else if (savedList.indexOf(productId) === -1) {\n          savedList.push(productId);\n          saveToLocalStorage(key, savedList);\n        }\n      }\n    })\n  );\n}\n","import Swiper from 'swiper/swiper-bundle';\n\nexport const heroSwiper = new Swiper('.hero-swiper-container', {\n  pagination: {\n    el: '.swiper-pagination',\n    clickable: true,\n  },\n  autoplay: {\n    delay: 3000,\n    disableOnInteraction: false,\n  },\n  speed: 3000,\n  loop: true,\n});\n","export const heroModal = heroSwiper => {\n  const refs = {\n    openModalBtn: document.querySelector('[data-hero-modal-open]'),\n    closeModalBtn: document.querySelector('[data-hero-modal-close]'),\n    backdrop: document.querySelector('[data-hero-modal]'),\n    body: document.querySelector('body'),\n  };\n\n  refs.openModalBtn.addEventListener('click', onOpenModal);\n  refs.closeModalBtn.addEventListener('click', onCloseModal);\n  refs.backdrop.addEventListener('click', onBackdropClick);\n\n  function onOpenModal() {\n    window.addEventListener('keydown', onEscKeyPress);\n    refs.body.classList.add('show-modal');\n    refs.openModalBtn.classList.add('is-active');\n    heroSwiper.autoplay.stop();\n  }\n\n  function onCloseModal() {\n    window.removeEventListener('keydown', onEscKeyPress);\n    refs.body.classList.remove('show-modal');\n    refs.openModalBtn.classList.remove('is-active');\n    heroSwiper.autoplay.start();\n  }\n\n  function onBackdropClick(evt) {\n    if (evt.currentTarget === evt.target) {\n      onCloseModal();\n    }\n  }\n\n  function onEscKeyPress(evt) {\n    if (evt.code === 'Escape') {\n      onCloseModal();\n      refs.openModalBtn.blur();\n    }\n  }\n};\n","document.body.addEventListener('click', onFilterItemClick);\n    \nfunction onFilterItemClick(evt) {\n    const activeFilterItem = document.querySelector('[data-filter-item].is-active');\n    const activeDropdownList = document.querySelector('[data-filter-item].is-active>ul');\n    \n    if (!evt.target.closest('[data-filter-item]')) {\n        if (activeFilterItem) {\n            switchFilterState(activeFilterItem);\n            switchFilterState(activeDropdownList);\n        }\n        return;\n    }\n\n    if (evt.target.closest('[data-filter-item].is-active')) {\n        switchFilterState(activeFilterItem);\n        switchFilterState(activeDropdownList);\n        return;\n    }\n\n    if (activeFilterItem) {\n        switchFilterState(activeFilterItem);\n        switchFilterState(activeDropdownList);\n    }\n\n    const nextActiveFilterItem = evt.target.closest('[data-filter-item]');\n    if (nextActiveFilterItem) {\n        nextActiveFilterItem.classList.add('is-active');\n        const firstActiveDropdownList = document.querySelector('[data-filter-item].is-active>ul');\n        switchFilterState(firstActiveDropdownList)\n    }\n}\n\nfunction switchFilterState(dropdownList) {\n    dropdownList.classList.toggle('is-active');\n}\n"],"names":["$312afa7e9128739a$var$navbarMenu","document","querySelector","$312afa7e9128739a$var$burgerMenu","addEventListener","classList","toggle","querySelectorAll","forEach","link","remove","window","innerWidth","contains","$aGajG","parcelRequire","$91JdT","$dcb04742fe89e849$export$614d337d20b30d74","$parcel$interopDefault","pagination","el","clickable","autoplay","delay","disableOnInteraction","speed","loop","enabled","$fov3b","reviewsSwiper","heroSwiper","refs","openModalBtn","closeModalBtn","backdrop","body","onCloseModal","removeEventListener","onEscKeyPress","start","evt","code","blur","add","stop","currentTarget","target","$7a197bac8f3cf206$var$refs","offerSpecial","dayOffer","recommendOffer","offerPlus","earlierWatched","$7fecdc0fda97424b$var$switchFilterState","dropdownList","async","offerSection","$8MnzK","sections","data","APIGetData","getDataBySection","localStorageData","loadFromLocalStorage","earlierWatchedList","join","getDataByID","removeClass","closest","addClass","markup","$gBFI5","createMarkup","insertAdjacentHTML","error","console","log","favoriteBtn","event","preventDefault","productID","id","savedListFav","newListFav","Array","isArray","saveToLocalStorage","indexOf","filter","favId","product","productId","nodeName","savedList","push","newList","$7a197bac8f3cf206$var$renderData","activeFilterItem","activeDropdownList","nextActiveFilterItem"],"version":3,"file":"index.bbe30fa2.js.map"}