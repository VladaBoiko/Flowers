{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","src/js/api/fetch-cards.js","src/js/catalog/markup.js","src/js/catalog/localStorage.js","src/js/catalog/const.js","src/js/catalog/utils.js","node_modules/@parcel/runtime-js/lib/runtime-c28f683df6226e94.js","src/js/catalog/render.js","src/js/catalog/handleFavorite.js","src/js/favorite-page.js","src/js/catalog/handleWatchedHistory.js","node_modules/@parcel/runtime-js/lib/runtime-9ad0196d9b241a19.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","const axios = require('axios').default;\n\nconst instance = axios.create({\n  baseURL: 'https://server-flower.herokuapp.com/',\n});\n\nexport const APIGetData = {\n  async getData() {\n    const response = await instance.get(`/flowers/all`);\n    const data = await response.data;\n    return data.result;\n  },\n\n  async getDataByID(id, page = 1, limit = 20, sorting = 'rating,1') {\n    const response = await instance.get(`/flowers/`, {\n      params: {\n        page,\n        limit,\n        id,\n        sorting,\n      },\n    });\n\n    const data = await response.data;\n    return data.result;\n  },\n\n  async getDataBySection(section, page = 1, limit = 8) {\n    const response = await instance.get(`/flowers/`, {\n      params: {\n        section,\n        page,\n        limit,\n      },\n    });\n\n    const data = await response.data;\n    return data.result;\n  },\n\n  async getDataByFilter(filter, page = 1, limit = 9, sorting = 'rating,1') {\n    const response = await instance.get(`/flowers/`, {\n      params: {\n        ...filter,\n        page,\n        limit,\n        sorting,\n      },\n    });\n\n    const data = await response.data;\n    return data;\n  },\n};\n","import { loadFromLocalStorage } from './localStorage';\nimport { statuses } from './const';\nimport { getKey } from './utils';\nimport icons from '../../img/catalog/icon-fav.svg';\n\nconst favoriteList = loadFromLocalStorage('Favorites');\n\nexport const createMarkup = data => {\n  return data\n    .map(({ _id, name, image, price, status }) => {\n      const keyStatus = getKey(status, statuses);\n      return `<li class=\"offer-list__item product\" id=\"${_id}\">\n        <a href=\"./good-card.html\" class=\"product__link\">\n          <img\n            loading=\"lazy\"\n            src=\"${image}\"\n            alt=\"${name}\"\n            class=\"product__image\"\n            width=\"290\"\n            height=\"250\"\n          />\n          <div class=\"product__overlay\">\n            <p class=\"product__status ${keyStatus}\">${status}</p>\n            <button type=\"button\" class=\"product__favorite ${isFav(_id)}\">\n              <svg width=\"34\" height=\"34\">\n                <use href=\"${icons}#icon-fav\"></use>\n              </svg>\n            </button>\n          </div>\n          <div class=\"product__content\">\n            <p class=\"product__text\">\n              ${name}\n            </p>\n            <p class=\"product__price\">${price} у.о.</p>\n            <button type=\"button\" class=\"product__button button dark\">\n              Замовити\n            </button>\n            <button type=\"button\" class=\"product__button-one-click\">\n              Придбати в 1 клік\n            </button>\n          </div>\n        </a>\n      </li>\n    `;\n    })\n    .join('');\n};\n\nfunction isFav(id) {\n  return favoriteList.indexOf(id) === -1 ? '' : 'checked';\n}\n","export function saveToLocalStorage(key, value) {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.log('save error-', error.message);\n  }\n}\n\nexport function loadFromLocalStorage(key) {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? '' : JSON.parse(serializedState);\n  } catch (error) {\n    console.log('load error-', error.message);\n  }\n}\n","export const statuses = {\n  hit: 'Xіт продажу',\n  absent: 'Немає в наявності',\n  new: 'Новинка',\n};\n\nexport const sections = {\n  offerSpecial: 'Спеціальна пропозиція',\n  dayOffer: 'Пропозиція дня',\n  recommendOffer: 'Рекомендуємо троянди',\n  offerPlus: 'З квітами купують',\n  earlierWatched: 'Раніше переглянуто',\n};\n\nexport const filterWords = {\n  category: 'Категорія',\n  sort: 'Вид',\n  color: 'Колір',\n  amount: 'Кількість',\n  size: 'Розмір',\n  form: 'Форма букету',\n  price: 'Ціна',\n};\n","export function getKey(value, object) {\n  let key = '';\n  Object.entries(object).map(el => (el[1] === value ? (key = el[0]) : ''));\n  return key;\n}\n\n// =================================\n\nexport function smoothScroll(cardSection) {\n  const { height: cardHeight } = cardSection.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1 + 10,\n    behavior: 'smooth',\n  });\n}\n\n// =======================================\n\nexport function addClass(element, cssClass) {\n  if (!element.classList.contains(cssClass)) element.classList.add(cssClass);\n}\nexport function removeClass(element, cssClass) {\n  if (element.classList.contains(cssClass)) element.classList.remove(cssClass);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"giLgO\")).toString();","import { handleFavorite } from './handleFavorite';\nimport { handleWatchedHistory } from './handleWatchedHistory';\n\nexport const render = (selector, markup) => {\n  selector.insertAdjacentHTML('beforeend', markup);\n  handleFavorite();\n  handleWatchedHistory();\n};\n\nexport const clearData = list => {\n  list.innerHTML = '';\n};\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\nimport { loadDataFavoritePage } from '../favorite-page';\n\nconst key = 'Favorites';\n\nexport function handleFavorite() {\n  const favoriteBtns = document.querySelectorAll('.product__favorite');\n\n  favoriteBtns.forEach(favoriteBtn =>\n    favoriteBtn.addEventListener('click', event => {\n      event.preventDefault();\n      const productID = favoriteBtn.closest('.product').id;\n\n      if (productID) {\n        const savedListFav = loadFromLocalStorage(key);\n\n        if (savedListFav === 'undefined') {\n          const newListFav = [productID];\n          saveToLocalStorage(key, newListFav);\n        } else if (savedListFav.indexOf(productID) === -1) {\n          savedListFav.push(productID);\n          saveToLocalStorage(key, savedListFav);\n        } else {\n          savedListFav.splice(savedListFav.indexOf(productID), 1);\n          saveToLocalStorage(key, savedListFav);\n        }\n      }\n\n      favoriteBtn.classList.toggle('checked');\n\n      if (!favoriteBtn.classList.contains('checked') && document.querySelector('.favorites.offer')) {\n        loadDataFavoritePage();\n      }\n    })\n  );\n}\n","import { APIGetData } from './api/fetch-cards';\nimport { createMarkup } from './catalog/markup';\nimport { render, clearData } from './catalog/render';\nimport { loadFromLocalStorage } from './catalog/localStorage';\nimport { addClass, removeClass } from './catalog/utils';\n\nexport const loadDataFavoritePage = () => {\n  if (document.querySelector('.favorites.offer')) {\n    const refs = {\n      titleWrapper: document.querySelector('.offer__title-wrapper'),\n      btn: document.querySelector('.favorites__button'),\n      list: document.querySelector('.offer__list--fav'),\n    };\n\n    const favotireListFromLocalStorage = loadFromLocalStorage('Favorites');\n\n    if (!favotireListFromLocalStorage) {\n      clearData(refs.list);\n\n      refs.titleWrapper.children[0].textContent = 'В обраному поки що нічого нема';\n      refs.btn.textContent = 'Перейти на головну';\n      refs.btn.href = './index.html';\n      removeClass(refs.titleWrapper.children[1], 'hidden');\n      removeClass(refs.btn, 'favorites__button--centered');\n    } else {\n      refs.titleWrapper.children[0].textContent = 'Обране';\n      refs.btn.textContent = 'Перейти в каталог';\n      refs.btn.href = './catalog.html';\n      addClass(refs.titleWrapper.children[1], 'hidden');\n      addClass(refs.btn, 'favorites__button--centered');\n\n      renderData();\n    }\n\n    async function renderData() {\n      try {\n        data = await APIGetData.getDataByID(favotireListFromLocalStorage.join(','));\n        const markup = createMarkup(data);\n        clearData(refs.list);\n        render(refs.list, markup);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n  }\n};\n\nloadDataFavoritePage();\n","import { saveToLocalStorage, loadFromLocalStorage } from './localStorage';\n\nconst key = 'EarlierWatched';\nconst currentCardId = 'CurrentCardID';\n\nexport function handleWatchedHistory() {\n  const products = document.querySelectorAll('.product');\n\n  products.forEach(product =>\n    product.addEventListener('click', evt => {\n      // event.preventDefault();\n      const productId = product.id;\n      if (\n        !(\n          ((evt.target.nodeName === 'svg' || evt.target.nodeName === 'use') &&\n            evt.target.closest('.product__favorite')) ||\n          evt.target.classList.contains('product__favorite')\n        )\n      ) {\n        saveToLocalStorage(currentCardId, productId);\n      }\n\n      if (productId) {\n        const savedList = loadFromLocalStorage(key);\n\n        if (savedList === 'undefined') {\n          const newList = [productId];\n          saveToLocalStorage(key, newList);\n        } else if (savedList.indexOf(productId) === -1) {\n          savedList.push(productId);\n          saveToLocalStorage(key, savedList);\n        }\n      }\n    })\n  );\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"h8CmE\\\":\\\"favorites.68434e86.js\\\",\\\"giLgO\\\":\\\"icon-fav.d2a3f45b.svg\\\",\\\"3UsrL\\\":\\\"favorites.7e5ec29b.js\\\"}\"));"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7c65d43fe72d3aa3$var$instance","parcelRequire","default","create","baseURL","$7c65d43fe72d3aa3$export$bf05bfad153d9b1b","async","response","get","data","result","page","limit","sorting","params","section","filter","$5rfeO","$c17074c9bea9e388$var$favoriteList","loadFromLocalStorage","$c17074c9bea9e388$export$24783e9f3a24abe4","map","_id","name","image","price","status","$91JdT","getKey","$8MnzK","statuses","indexOf","$parcel$interopDefault","$92k8A","join","$3f5b4b525e2ea599$export$1b8cd2d0ef9a8e5d","key","value","serializedState","JSON","stringify","localStorage","setItem","error","console","log","message","$3f5b4b525e2ea599$export$e68c847c0bceb7d5","getItem","parse","$66451811b5c1e7c0$export$cfd07d0d262760eb","hit","absent","new","$66451811b5c1e7c0$export$5a1dbaa3e4449344","offerSpecial","dayOffer","recommendOffer","offerPlus","earlierWatched","$66451811b5c1e7c0$export$594f50dfae6c7004","category","sort","color","amount","size","form","$692749682151ca8e$export$a47fb462a08de82f","object","entries","el","$692749682151ca8e$export$5713088ca0a20ab6","cardSection","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$692749682151ca8e$export$d2cf6cd1dc7067d3","element","cssClass","classList","contains","add","$692749682151ca8e$export$c2255604a80b4506","remove","module","exports","URL","resolve","import","meta","url","toString","$5XcKK","$a86f5b377b8c9f1d$export$b3890eb0ae9dca99","selector","markup","insertAdjacentHTML","handleFavorite","$bbqtj","handleWatchedHistory","$a86f5b377b8c9f1d$export$ec21c014cef0b1e8","list","innerHTML","$455c5af1244ae551$var$key","$455c5af1244ae551$export$52be419ad328e20a","document","querySelectorAll","forEach","favoriteBtn","addEventListener","event","preventDefault","productID","closest","savedListFav","newListFav","saveToLocalStorage","push","splice","toggle","querySelector","$2pi9I","loadDataFavoritePage","$aGajG","$1c0bffe6411de2f6$export$99af6473500b69df","refs","titleWrapper","btn","favotireListFromLocalStorage","children","textContent","href","addClass","APIGetData","getDataByID","$gBFI5","createMarkup","$eszG8","clearData","render","renderData","removeClass","$8245418db113832d$var$key","$8245418db113832d$export$b82bf82003a9f862","product","evt","productId","target","nodeName","savedList","newList","register"],"version":3,"file":"favorites.68434e86.js.map"}